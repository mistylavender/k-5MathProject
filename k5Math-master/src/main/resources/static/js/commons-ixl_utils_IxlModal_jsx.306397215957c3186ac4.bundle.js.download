(self.webpackChunkixl_webpack=self.webpackChunkixl_webpack||[]).push([["commons-ixl_utils_IxlModal_jsx"],{29790:(e,t,o)=>{"use strict";o.d(t,{WM:()=>s.joinClasses});var s=o(85815)},97773:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var s=o(53698),n=o(42441),i=o(91152),a=o.n(i),r=o(35026),l=o.n(r),d=(o(34562),o(80224)),c=o(29790),h=o(60893);function p(e,t,o,s,n){const i=o?window.innerWidth:window.innerHeight,a=o?e.width:e.height,r=y(t,o,s);return r+a*(1-n)<=i&&r-a*n>=0}function y(e,t,o){return t?e.left+(o?0:e.width/2):e.top+(o?0:e.height/2)}const m={open:a().bool,closeCallback:a().func,focusCallback:a().func,blurCallback:a().func,mouseLeaveCallback:a().func,showCloseButton:a().bool,extraClassName:a().string,extraClassNameUnderlay:a().string,minMargin:a().number,zIndex:a().number,maskClosable:a().bool,hideMask:a().bool,closeButtonAriaLabelOverride:a().string,ariaLabelledBy:a().string,ariaDescribedBy:a().string,alignmentMode:a().string,targetNodeInfo:a().shape({domNode:a().any,offset:a().number.isRequired,preferredDirections:a().arrayOf(a().oneOf(["above","below","left","right"])).isRequired,onRenderCallback:a().func,crossAxisAlignToEdge:a().bool}),onKeyDown:a().func,autoCenter:a().bool,shouldFocusOnOpen:a().bool,isAlertDialog:a().bool};class b extends s.Component{constructor(e){super(e),this._onResize=this._onResize.bind(this),this._onEscape=this._onEscape.bind(this),this._onFocusPopover=this._onFocusPopover.bind(this),this._onBlurPopover=this._onBlurPopover.bind(this),this._onMouseLeavePopover=this._onMouseLeavePopover.bind(this),this._onMaskClose=this._onMaskClose.bind(this),this.forceResizePopover=this.forceResizePopover.bind(this),this._centerPopover=this._centerPopover.bind(this),this._setupTabs=this._setupTabs.bind(this),this._removeTabs=this._removeTabs.bind(this),this._controlTab=this._controlTab.bind(this),this._setModalRef=this._setModalRef.bind(this),this._setModalContentRef=this._setModalContentRef.bind(this),this._setUnderlayRef=this._setUnderlayRef.bind(this),this._setModalArrowRef=this._setModalArrowRef.bind(this)}componentDidMount(){window.addEventListener("resize",this._onResize),document.addEventListener("keydown",this._onEscape),this._setupTabs(),this._onResize()}componentDidUpdate(e){this._removeTabs(),l().ios&&l().ios>=11&&l().ios<=11.2&&(!e.open&&this.props.open?document.body.classList.add("prevent-ios-body-scroll"):e.open&&!this.props.open&&document.body.classList.remove("prevent-ios-body-scroll")),this._setupTabs(),this._onResize(),this.props.shouldFocusOnOpen&&!e.open&&this.props.open&&(this._tabOrder.length>0?setTimeout((()=>this._tabOrder[0].focus()),0):setTimeout((()=>this.modal.focus()),0))}componentWillUnmount(){this._removeTabs(),window.removeEventListener("resize",this._onResize),document.removeEventListener("keydown",this._onEscape),document.body.classList.remove("prevent-ios-body-scroll")}_setupTabs(){let e=Array.prototype.slice.call(n.findDOMNode(this).querySelectorAll(["a","input:not([type=hidden]):enabled","select","textarea","button:not([disabled])",'.practice-audio-button:not([tabindex="-1"])'].join(",")));e=e.filter((e=>e.offsetHeight>0));let t=e.filter((e=>0===e.tabIndex)),o=e.filter((e=>e.tabIndex>0));o.sort(((e,t)=>e.tabIndex>t.tabIndex)),this._tabOrder=t.concat(o);let s=this;this._tabOrder.forEach((function(e){e.addEventListener("keydown",s._controlTab)}))}_removeTabs(){let e=this;this._tabOrder.forEach((function(t){t.removeEventListener("keydown",e._controlTab)}))}_controlTab(e){if(e.key===h.R8.TAB.key){e.preventDefault();let t=this._tabOrder.indexOf(e.target);e.shiftKey?t--:t++,t<0&&(t=this._tabOrder.length-1),t>=this._tabOrder.length&&(t=0),this._tabOrder[t].focus()}}_onResize(){this.props.open&&this.props.autoCenter&&this._positionPopover()}_onEscape(e){this.props.open&&e.key===h.R8.ESCAPE.key&&this.props.showCloseButton&&this.props.closeCallback()}_onFocusPopover(){this.props.focusCallback&&this.props.focusCallback()}_onBlurPopover(){this.props.blurCallback&&this.props.blurCallback()}_onMouseLeavePopover(){this.props.mouseLeaveCallback&&this.props.mouseLeaveCallback()}_onMaskClose(e){this.props.maskClosable&&e.currentTarget===e.target&&this.props.closeCallback()}forceResizePopover(){this._positionPopover()}_positionPopover(){const e=this.props;"target-node"===e.alignmentMode&&e.targetNodeInfo&&e.targetNodeInfo.domNode?this._alignPopoverToTargetNode():this._centerPopover()}_alignPopoverToTargetNode(){const{preferredDirections:e,onRenderCallback:t}=this.props.targetNodeInfo,o={left:this._alignPopoverToTargetNodeLeft,right:this._alignPopoverToTargetNodeRight,above:this._alignPopoverToTargetNodeAbove,below:this._alignPopoverToTargetNodeBelow};let s=!1;for(let n=0;n<e.length&&!s;n++){let i=e[n];s=o[i].call(this),s&&t&&t(i)}s||(o[e[0]].call(this,!0),t&&t(e[0]))}_alignPopoverToTargetNodeBelow(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,n=this.modal,i=n.getBoundingClientRect(),a=this.modal.style.left?parseInt(this.modal.style.left):0,r=this.modal.style.top?parseInt(this.modal.style.top):0,l=t.getBoundingClientRect();if(l.bottom+i.height<=window.innerHeight&&p(i,l,!0,s,o)||e){const e=y(l,!0,s),t=i.left+i.width*o;n.style.left="".concat(a+Math.round(e-t),"px");const d=l.bottom,c=i.top;n.style.top="".concat(r+Math.round(d-c),"px");const h=this.modalArrow.style;return h.borderLeft="".concat(10,"px solid transparent"),h.borderRight="".concat(10,"px solid transparent"),h.borderTop="",h.borderBottom="".concat(5,"px solid #FFFFFF"),h.top="-".concat(5,"px"),h.bottom="",h.left="calc(".concat(100*o,"% - ").concat(10,"px)"),h.right="",!0}}_alignPopoverToTargetNodeAbove(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,n=this.modal,i=n.getBoundingClientRect(),a=this.modal.style.left?parseInt(this.modal.style.left):0,r=this.modal.style.top?parseInt(this.modal.style.top):0,l=t.getBoundingClientRect();if(l.top-i.height>=0&&p(i,l,!0,s,o)||e){const e=y(l,!0,s),t=i.left+i.width*o;n.style.left="".concat(a+Math.round(e-t),"px");const d=l.top,c=i.bottom;n.style.top="".concat(r+Math.round(d-c),"px");const h=this.modalArrow.style;return h.borderLeft="".concat(10,"px solid transparent"),h.borderRight="".concat(10,"px solid transparent"),h.borderTop="".concat(5,"px solid #FFFFFF"),h.borderBottom="",h.top="",h.bottom="-".concat(5,"px"),h.left="calc(".concat(100*o,"% - ").concat(10,"px)"),h.right="",!0}}_alignPopoverToTargetNodeLeft(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,n=this.modal,i=n.getBoundingClientRect(),a=this.modal.style.left?parseInt(this.modal.style.left):0,r=this.modal.style.top?parseInt(this.modal.style.top):0,l=t.getBoundingClientRect();if(l.left-i.width>=0&&p(i,l,!1,s,o)||e){const e=l.left,t=i.right;n.style.left="".concat(a+Math.round(e-t),"px");const d=y(l,!1,s),c=i.top+i.height*o;n.style.top="".concat(r+Math.round(d-c),"px");const h=this.modalArrow.style;return h.borderLeft="".concat(5,"px solid #FFFFFF"),h.borderRight="",h.borderTop="".concat(10,"px solid transparent"),h.borderBottom="".concat(10,"px solid transparent"),h.top="calc(".concat(100*o,"% - ").concat(10,"px)"),h.bottom="",h.left="",h.right="-".concat(5,"px"),!0}}_alignPopoverToTargetNodeRight(e){const{domNode:t,offset:o,crossAxisAlignToEdge:s}=this.props.targetNodeInfo,n=this.modal,i=n.getBoundingClientRect(),a=this.modal.style.left?parseInt(this.modal.style.left):0,r=this.modal.style.top?parseInt(this.modal.style.top):0,l=t.getBoundingClientRect();if(l.right+i.width<=window.innerWidth&&p(i,l,!1,s,o)||e){const e=l.right,t=i.left;n.style.left="".concat(a+Math.round(e-t),"px");const d=y(l,!1,s),c=i.top+i.height*o;n.style.top="".concat(r+Math.round(d-c),"px");const h=this.modalArrow.style;return h.borderLeft="",h.borderRight="".concat(5,"px solid #FFFFFF"),h.borderTop="".concat(10,"px solid transparent"),h.borderBottom="".concat(10,"px solid transparent"),h.top="calc(".concat(100*o,"% - ").concat(10,"px)"),h.bottom="",h.left="-".concat(5,"px"),h.right="",!0}}_centerPopover(){const e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;this._lastHeight||(this._lastHeight=e),this._lastWidth||(this._lastWidth=t),/(android)/i.test(navigator.userAgent)&&(this._lastWidth===t&&3*this._lastHeight/4>e?this._androidKeyboardShown=!0:this._lastWidth===t&&4*this._lastHeight/3<e&&(this._androidKeyboardShown=!1)),this.modalContent.style.removeProperty("height"),this.modal.style.removeProperty("right"),this.modal.style.removeProperty("left"),this.modalContent.style.removeProperty("width");const o=this.modalContent.getBoundingClientRect(),s=this.underlay.getBoundingClientRect(),n=o.height,i=o.width,a=e-n;let r=this.props.minMargin+(s.width-i)/2;a>2*r?(this.modal.style.top="".concat(a/2,"px"),this.modal.style.removeProperty("bottom")):this._androidKeyboardShown?this.modal.style.top="".concat(r,"px"):(this.modal.style.top="".concat(r,"px"),this.modal.style.bottom="".concat(r,"px"),this.modalContent.style.height="".concat(e-2*r,"px"));const l=t-i;l>2*r?(this.modal.style.left="".concat(l/2,"px"),this.modal.style.removeProperty("right")):(this.modal.style.left="".concat(r,"px"),this.modal.style.right="".concat(r,"px"),this.modalContent.style.width="".concat(t-2*r,"px")),this._lastHeight=e,this._lastWidth=t}_setModalRef(e){this.modal=e}_setModalContentRef(e){this.modalContent=e}_setUnderlayRef(e){this.underlay=e}_setModalArrowRef(e){this.modalArrow=e}render(){const{extraClassName:e,alignmentMode:t,open:o,zIndex:n,hideMask:i,closeCallback:a,closeButtonAriaLabelOverride:r,showCloseButton:l}=this.props;let h=null;l&&(h=s.createElement(d.OO.Consumer,null,(e=>{let{getI18nMessage:t}=e;return s.createElement("button",{className:"modal-close",onClick:a,"aria-label":r||t("close_button.aria_text")})})));const p={display:o?"block":"none",zIndex:n},y=(0,c.WM)("ixl-modal-outer-container",e,t,{hidden:i}),m={zIndex:n},b=(0,c.WM)("ixl-modal-mask",{hidden:i}),u={zIndex:n+1},g=(0,c.WM)({"ixl-modal":!0}),_=this.props.extraClassNameUnderlay||"ixl-modal-underlay";return s.createElement("div",{className:y,onKeyDown:this.props.onKeyDown,style:p},s.createElement("div",{className:b,style:m,onClick:this._onMaskClose}),s.createElement("div",{className:g,style:u,role:this.props.isAlertDialog?"alertdialog":"dialog","aria-modal":"true","aria-labelledby":this.props.ariaLabelledBy,"aria-describedby":this.props.ariaDescribedBy,onFocus:this._onFocusPopover,onBlur:this._onBlurPopover,onMouseLeave:this._onMouseLeavePopover,tabIndex:-1,ref:this._setModalRef},s.createElement("div",{className:"ixl-modal-arrow",ref:this._setModalArrowRef}),s.createElement("div",{className:"ixl-modal-container"},s.createElement("div",{className:"ixl-modal-inside"},s.createElement("div",{className:"ixl-modal-content",ref:this._setModalContentRef},this.props.children)),h),s.createElement("div",{className:_,ref:this._setUnderlayRef})))}}b.propTypes=m,b.defaultProps={open:!1,showCloseButton:!0,extraClassName:"",extraClassNameUnderlay:"",minMargin:10,zIndex:1e3,maskClosable:!1,hideMask:!1,closeButtonAriaLabelOverride:"",ariaLabelledBy:"",ariaDescribedBy:"",alignmentMode:"center",targetNodeInfo:null,autoCenter:!0,shouldFocusOnOpen:!1,isAlertDialog:!1},b.displayName="IxlModal";const u=b},60893:(e,t,o)=>{"use strict";o.d(t,{R8:()=>s});const s={ZERO:{keyCode:48,key:0},ONE:{keyCode:49,key:1},TWO:{keyCode:50,key:2},THREE:{keyCode:51,key:3},FOUR:{keyCode:52,key:4},FIVE:{keyCode:53,key:5},SIX:{keyCode:54,key:6},SEVEN:{keyCode:55,key:7},EIGHT:{keyCode:56,key:8},NINE:{keyCode:57,key:9},NUMPAD_ZERO:{keyCode:96,key:0},NUMPAD_ONE:{keyCode:97,key:1},NUMPAD_TWO:{keyCode:98,key:2},NUMPAD_THREE:{keyCode:99,key:3},NUMPAD_FOUR:{keyCode:100,key:4},NUMPAD_FIVE:{keyCode:101,key:5},NUMPAD_SIX:{keyCode:102,key:6},NUMPAD_SEVEN:{keyCode:103,key:7},NUMPAD_EIGHT:{keyCode:104,key:8},NUMPAD_NINE:{keyCode:105,key:9},LEFT_ARROW:{keyCode:37,key:"ArrowLeft"},RIGHT_ARROW:{keyCode:39,key:"ArrowRight"},UP_ARROW:{keyCode:38,key:"ArrowUp"},DOWN_ARROW:{keyCode:40,key:"ArrowDown"},SPACE:{keyCode:32,key:" "},BACKSPACE:{keyCode:8,key:"Back-space"},TAB:{keyCode:9,key:"Tab"},ESCAPE:{keyCode:27,key:"Escape"},ENTER:{keyCode:13,key:"Enter"},DELETE:{keyCode:46,key:"Delete"},SHIFT:{keyCode:16,key:"Shift"},HOME:{keyCode:36,key:"Home"},END:{keyCode:35,key:"End"}}}}]);